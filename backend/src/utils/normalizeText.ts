import stripMarks from "strip-combining-marks";

const REPLACED_CHARS_PATTERNS = {
  "0": "0|â“ª|â‚€|â°|ðŸ¢|ðŸ˜|ï¼|ðŸŽ|ðŸ¬|ðŸ¶",
  "1": "â‘´|âž€|â¶|â“µ|â‘ |â‚|Â¹|ðŸ£|ðŸ™|ï¼‘|ðŸ|ðŸ­|ðŸ·",
  "2": "â‘µ|âž‹|âž|â·|â“¶|â‘¡|â‚‚|Â²|ðŸ¤|ðŸš|ï¼’|ðŸ|ðŸ®|ðŸ¸",
  "3": "â‘¶|âžŒ|âž‚|â¸|â“·|â‘¢|â‚ƒ|Â³|ðŸ¥|ðŸ›|ï¼“|ðŸ‘|ðŸ¯|ðŸ¹",
  "4": "â‘·|âž|âžƒ|â¹|â“¸|â‘£|â‚„|â´|ðŸ¦|ðŸœ|ï¼”|ðŸ’|ðŸ°|ðŸº",
  "5": "â‘¸|âžŽ|âž„|âº|â“¹|â‘¤|â‚…|âµ|ðŸ§|ðŸ|ï¼•|ðŸ“|ðŸ±|ðŸ»",
  "6": "â‘¹|âž|âž…|â»|â“º|â‘¥|â‚†|â¶|ðŸ¨|ðŸž|ï¼–|ðŸ”|ðŸ²|ðŸ¼",
  "7": "â‘º|âž|âž†|â¼|â“»|â‘¦|â‚‡|â·|ðŸ©|ðŸŸ|ï¼—|ðŸ•|ðŸ³|ðŸ½",
  "8": "â‘»|âž‘|âž‡|â½|â“¼|â‘§|â‚ˆ|â¸|ðŸª|ðŸ |ï¼˜|ðŸ–|ðŸ´|ðŸ¾",
  "9": "â‘¼|âž’|âžˆ|â¾|â“½|â‘¨|â‚‰|â¹|ðŸ«|ðŸ¡|ï¼™|ðŸ—|ðŸµ|ðŸ¿",
  a: [
    "ï¾‘|ï½|ï¼¡|ï¼ |ðŸ‡¦|ðŸ…°|ðŸ…|ðŸ„°|ðžª|ðž|ð°|ð–|ðœ¶|ðœœ|ð›¼|ð›¢|ð›‚|ðš¨|ðšŠ|ð™°|ð™–|ð˜¼|ð˜¢|ð˜ˆ|ð—®|ð—”|ð–º|ð– |ð–†|ð•¬|ð•’|ð”¸|ð”ž|ð”„|ð“ª|ð“|ð’¶|ð’œ|ð’‚|ð‘¨|ð‘Ž",
    "ð´|ðš|ð€|ðŠ |ê­º|ê“¯|ê“®|ê‹¬|å‚|â±¯|â“|â’¶|â’œ|âº|âˆ†|âˆ€|â‚³|â‚|á¾¼|á¾º|á¾¹|á¾¸|á¾·|á¾¶|á¾´|á¾³|á¾²|á¾±|á¾°|á¾|á¾Ž|á¾|á¾Œ|á¾‹|á¾Š|á¾‰|á¾ˆ|á¾‡|á¾†|á¾…|á¾„|á¾ƒ|á¾‚|á¾",
    "á¾€|á½°|á¼‡|á¼†|á¼…|á¼„|á¼ƒ|á¼‚|á¼|á¼€|áº·|áº¶|áºµ|áº´|áº³|áº²|áº±|áº°|áº¯|áº®|áº­|áº¬|áº«|áºª|áº©|áº¨|áº§|áº¦|áº¥|áº¤|áº£|áº¢|áº¡|áº |áºš|á¸|á¸€|áµƒ|á´¬|á´€|á—©|á—…|á—„|á—|áŽ¯",
    "áŽª|áˆˆ|à¸„|à¶¶|Ô¹|Ó“|Ó’|Ñ¦|Ð°|Ð”|Ð|Î±|Î¬|Î›|Î”|Î‘|Î†|É’|É‘|É|Èº|È§|È¦|Ç»|Çº|ÇŸ|ÇŽ|Ç|Ä…|Ä„|Äƒ|Ä‚|Ä|Ä€|Ã¥|Ã¤|Ã£|Ã¢|Ã¡|Ã |Ã…|Ã„|Ãƒ|Ã‚|Ã|Ã€",
    "Âª|a|A|@|:regional_indicator_a:|4",
  ].join("|"),
  b: [
    "ï½‚|ï¼¢|ðŸ‡§|ðŸ…±|ðŸ…‘|ðŸ„±|ðž«|ðž‘|ð±|ð—|ðœ·|ðœ|ð›½|ð›£|ð›ƒ|ðš©|ðš‹|ð™±|ð™—|ð˜½|ð˜£|ð˜‰|ð—¯|ð—•|ð–»|ð–¡|ð–‡|ð•»|ð•­|ð•“|ð”¹|ð”Ÿ|ð”“|ð”…|ð“«|ð“‘|ð’·|ð’ƒ|ð‘©|ð‘|ðµ|ð›",
    "ð|ð‘‚|ðŒ|ðŠ¡|ðŠ‚|ê®Ÿ|êžµ|êž´|ê“­|ê“|ä¹ƒ|â“‘|â’·|â’|â„¬|á¸‡|á¸†|á¸…|á¸„|á¸ƒ|á¸‚|áµ‡|á´®|á›’|á™ |á—·|á–¯|á¼|á´|á°|á|áƒª|á‚¦|à¹–|à¹’|à¸¿|Ø·|Ò|Ñ£|ÑŒ|ÑŠ|Ð²|Ð¬|Ð’",
    "Ð‘|Ï|Î²|Î’|Ê™|É®|Éž|Æ…|Æ„|Æ€|ÃŸ|b|B|:regional_indicator_b:",
  ].join("|"),
  c: [
    "ï½ƒ|ï¼£|ðŸŒ|ðŸ‡¨|ðŸ…²|ðŸ…’|ðŸ„²|ðšŒ|ð™²|ð™˜|ð˜¾|ð˜¤|ð˜Š|ð—°|ð—–|ð–¼|ð–¢|ð–ˆ|ð•®|ð•”|ð” |ð“¬|ð“’|ð’¸|ð’ž|ð’„|ð‘ª|ð‘|ð¶|ðœ|ð‚|ð‘‹|ð½|ð£|ð•|ðŒ‚|ðŠ¢|ê®¯|ê“›|ê“š|åŒš|â²¥|â²¤|â“’|â’¸|â’ž",
    "â†»|â†„|â†ƒ|â…½|â…­|â„­|â„ƒ|â„‚|â‚µ|á¸‰|á¸ˆ|á¶œ|á´|á´„|á‘¢|á‘•|á£|áŸ|áˆ|áˆ­|á„ƒ|á¥|á|à½„|à¶‹|Ò«|Ò€|Ñ|Ð¡|Ï½|Ï¹|Ï²|Ïš|Ï‚|Í»|Ê—|É•|É”|È»|Æˆ|Æ†|Ä|ÄŒ|Ä‹|ÄŠ|Ä‰",
    "Äˆ|Ä‡|Ä†|Ã§|Ã‡|Â©|Â¢|c|C|:regional_indicator_c:",
  ].join("|"),
  d: [
    "ï½„|ï¼¤|ðŸ‡©|ðŸ…³|ðŸ…“|ðŸ„³|ðš|ð™³|ð™™|ð˜¿|ð˜¥|ð˜‹|ð—±|ð——|ð–½|ð–£|ð–‰|ð•¯|ð••|ð”»|ð”¡|ð”‡|ð“­|ð““|ð’¹|ð’Ÿ|ð’…|ð‘«|ð‘‘|ð·|ð|ðƒ|ê­°|ê“·|ê““|ê“’|â““|â’¹|â’Ÿ|âˆ‚|â†|â…¾|â…®",
    "â…†|â……|â‚«|á¸“|á¸’|á¸‘|á¸|á¸|á¸Ž|á¸|á¸Œ|á¸‹|á¸Š|áµˆ|á´°|á´…|á—¬|á—ª|á—¡|á—ž|á•²|á‘¯|á§|áŽ´|áŽ |à»“|à¹”|Õ®|Õª|Ôƒ|Ô|É—|É–|ÆŒ|ÆŠ|Ä‘|Ä|Ä|ÄŽ|Ã|d|D|:regional_indicator_d:",
  ].join("|"),
  e: [
    "ï¾|ï½…|ï¼¥|ï»‰|ðŸ‡ª|ðŸ…´|ðŸ…”|ðŸ„´|ðž·|ðž¢|ðž”|ð½|ð¨|ðš|ðƒ|ðœ®|ðœ |ðœ‰|ð›´|ð›¦|ð›|ðšº|ðš¬|ðšŽ|ð™´|ð™š|ð™€|ð˜¦|ð˜Œ|ð—²|ð—˜|ð–¾|ð–¤|ð–Š|ð•°|ð•–|ð”¼|ð”¢|ð”ˆ|ð“®|ð“”|ð’†|ð‘¬|ð‘’|ð¸",
    "ðž|ð„|ð©|ð|ðŠ†|ê®›|ê­¼|ê¬²|êž“|ê«|ê“±|ê“°|ä¹‡|ã‰«|âµ‰|â´º|â´¹|â³|â²‰|â“”|â’º|â’ |â‹¿|â‹´|âˆ‘|âˆŠ|âˆˆ|âˆƒ|â…‡|â…€|â„°|â„¯|â„®|â„‡|â‚¬|â‚‘|á¿ˆ|á½²|á¼|á¼œ|á¼›|á¼š|á¼™|á¼˜|á¼•",
    "á¼”|á¼“|á¼’|á¼‘|á¼|á»‡|á»†|á»…|á»„|á»ƒ|á»‚|á»|á»€|áº¿|áº¾|áº½|áº¼|áº»|áºº|áº¸|á¸|á¸œ|á¸›|á¸š|á¸™|á¸˜|á¸—|á¸–|á¸•|á¸”|áµ‰|á´±|á´ˆ|á´‡|á˜¿|á—´|á‹|áŽ¬|áƒ³|à½‡|Ô‘|Ô|Ó¡|Ó™|Ó˜|Ò¿|Ò½",
    "Ñ”|Ñ|Ð·|Ðµ|Ð•|Ïµ|Î¾|Îµ|Î­|Î£|Îž|Î•|Ê’|Éœ|É›|É™|É˜|É†|È|Ç|Æº|Æ©|Æ|Æ|ÆŽ|Ä›|Äš|Ä™|Ä˜|Ä—|Ä–|Ä•|Ä”|Ä“|Ä’|Ã«|Ãª|Ã©|Ã¨|Ã‹|ÃŠ|Ã‰|Ãˆ|Â£|e|E|:regional_indicator_e:|3",
  ].join("|"),
  f: [
    "ï½†|ï¼¦|ï¬º|ðŸ‡«|ðŸ…µ|ðŸ…•|ðŸ„µ|ðŸ‹|ðš|ð™µ|ð™›|ð™|ð˜§|ð˜|ð—³|ð—™|ð–¿|ð–¥|ð–‹|ð•±|ð•—|ð”½|ð”£|ð”‰|ð“¯|ð“•|ð’»|ð’‡|ð‘­|ð‘“|ð¹|ðŸ|ð…|ðŠ¥|ðŠ‡|ê¬µ|êŸ»|êž™|êž˜|êœ°|ê“ž|ê“|åƒ|â“•|â’»",
    "â’¡|â„²|â„±|â„‰|â‚£|áº|á¸Ÿ|á¸ž|á¶ |á–·|á–µ|á–´|áŽ¸|à½“|Ò“|Ï|Ïœ|Ê„|ÉŸ|Æ’|Æ‘|Å¿|f|F|:regional_indicator_f:",
  ].join("|"), // conflicts with T: Å¦
  g: [
    "ï½‡|ï¼§|ï»®|ï­Ž|ð ‚Ž|ðŸ‡¬|ðŸ…¶|ðŸ…–|ðŸ„¶|ðš|ð™¶|ð™œ|ð™‚|ð˜¨|ð˜Ž|ð—´|ð—š|ð—€|ð–¦|ð–Œ|ð•²|ð•˜|ð”¾|ð”¤|ð”Š|ð“°|ð“–|ð’¢|ð’ˆ|ð‘®|ð‘”|ðº|ð |ð†|ê®|ê“–|â“–|â’¼|â’¢|â…|â„Š|â‚²|á¸¡",
    "á¸ |á¶ƒ|áµ|á´³|á˜œ|á»|á³|á©|á€|áŽ¶|àº‡|Ù‚|Ö|Ô|ÔŒ|Ð‘|Ê›|É¢|É¡|É |É“|Çµ|Ç´|Ç«|Ç§|Ç¦|Ç¤|Æƒ|Ä£|Ä¢|Ä¡|Ä |ÄŸ|Äž|Ä|Äœ|g|G|:regional_indicator_g:",
  ].join("|"),
  h: [
    "ï½ˆ|ï¼¨|ðŸ‡­|ðŸ…·|ðŸ…—|ðŸ„·|ðž–|ðœ|ðœ¢|ð›¨|ðš®|ðš‘|ð™·|ð™|ð™ƒ|ð˜©|ð˜|ð—µ|ð—›|ð—|ð–§|ð–|ð•³|ð•™|ð”¥|ð“±|ð“—|ð’½|ð’‰|ð‘¯|ð»|ð¡|ð‡|ð‹|ê®‹|ê“§|å„|ã‚“|â²Ž|â±§|â“—",
    "â’½|â’£|â„Ž|â„|â„Œ|â„‹ð‘–|â„‹|â‚•|á¿Œ|á¿Š|á¾Ÿ|á¾ž|á¾|á¾œ|á¾›|á¾š|á¾™|á¾˜|á¼¯|á¼®|á¼­|á¼¬|á¼«|á¼ª|á¼©|á¼¨|áº–|á¸«|á¸ª|á¸©|á¸¨|á¸§|á¸¦|á¸¥|á¸¤|á¸£|á¸¢|á´´|á•¼|á²|á‚|áŽ»|á‹ |á‹ž",
    "Õ°|Ô‹|ÔŠ|Ó‰|Óˆ|Ò»|Ñ’|Ð½|Ð|Ð‹|Î—|Î‰|Ê±|Ê°|Êœ|É§|É¦|É¥|Ç¶|Ä§|Ä¦|Ä¥|Ä¤|h|\\#|H|:regional_indicator_h:",
  ].join("|"),
  i: [
    "ï¾‰|ï½‰|ï¼©|ï¼|ïº|ïº|ðŸ‡®|ðŸ…¸|ðŸ…˜|ðŸ„¸|ðš’|ð™¸|ð™ž|ð™„|ð˜ª|ð˜|ð—¶|ð—œ|ð—‚|ð–¨|ð–Ž|ð•´|ð•š|ð•€|ð”¦|ð“²|ð“˜|ð’¾|ð’Š|ð‘°|ð‘—|ð‘–|ð¼|ð¢|ðˆ|ðŒ |ðŒ‰|ðŠŠ|ê­µ|ê™‡|ê“²|ä¸¨|âµ‘|âµ|â²’|â“˜|â’¾|â’¤|â³|âˆ£",
    "â…¼|â…°|â… |â…ˆ|â„¹|â„‘|â„|â±|á¿š|á¿™|á¿˜|á¿—|á¿–|á¿’|á¿‘|á¿|á½¶|á¼¿|á¼¾|á¼½|á¼¼|á¼»|á¼º|á¼¹|á¼¸|á¼·|á¼¶|á¼µ|á¼´|á¼³|á¼²|á¼±|á¼°|á»‹|á»Š|á»‰|á»ˆ|á¸¯|á¸®|á¸­|á¸¬|á¶¤|áµ¢|á´µ|á›|á“°|á†|áŽ¥|à½¢",
    "à¹€|ßŠ|Û±|Ù±|Ù¡|Ø§|Ø£|Ø¢|×•|×€|Ó|Ñ—|Ñ–|Ð†|ÏŠ|Î¹|Î¯|Î™|Î|Éª|É¨|Ç|Ç|Çƒ|Æ—|Å‚|Ä±|Ä°|Ä¯|Ä®|Ä­|Ä¬|Ä«|Äª|Ä©|Ä¨|Ã¯|Ã®|Ã­|Ã¬|Ã|ÃŽ|Ã|ÃŒ|Â¡|i",
    "\\ï¿¨|\\Ç€|I|:regional_indicator_i:|1|!",
  ].join("|"),
  j: [
    "ï¾Œ|ï½Š|ï¼ª|ï»|ðŸ‡¯|ðŸ…¹|ðŸ…™|ðŸ„¹|ðš“|ð™¹|ð™Ÿ|ð™…|ð˜«|ð˜‘|ð—·|ð—|ð—ƒ|ð–©|ð–|ð•µ|ð•›|ð•|ð”§|ð”|ð“³|ð“™|ð’¿|ð’¥|ð’‹|ð‘±|ð½|ð£|ð‰|ê­»|êž²|êž|ê“™|â±¼|â“™|â’¿|â’¥|â…‰|á´¶|á´Š|á’š|á’Ž|á’|á |áŽ«|à¸§",
    "Ú¶|Ù„|Ø²|× |×Ÿ|Ñ˜|Ðˆ|Ï³|Í¿|Ê²|Ê|Éˆ|Ç°|Äµ|Ä´|j|J|:regional_indicator_j:",
  ].join("|"),
  k: [
    "ï½‹|ï¼«|ðŸ‡°|ðŸ…º|ðŸ…š|ðŸ„º|ðŸ†|ðž³|ðž™|ðžŒ|ð¹|ðŸ|ð’|ðœ¿|ðœ¥|ðœ˜|ðœ…|ð›«|ð›ž|ð›‹|ðš±|ðš”|ð™º|ð™ |ð™†|ð˜¬|ð˜’|ð—¸|ð—ž|ð—„|ð–ª|ð–|ð•¶|ð•œ|ð•‚|ð”¨|ð”Ž|ð“´|ð“š|ð“€|ð’¦|ð’Œ|ð‘²",
    "ð‘˜|ð¾|ð¤|ðŠ|ð’¼|ê®¶|ê€|ê“—|â²•|â²”|â“š|â“€|â’¦|â‹Š|â„ª|â‚­|â‚–|á¸µ|á¸´|á¸³|á¸²|á¸±|á¸°|áµ|á´·|á´‹|á›•|á–½á¸|á¦|Ó„|Óƒ|Ò |ÒŸ|Òœ|Ò›|Ðº|Ðš|ÐŒ|Ï°|Ï—|Îº|Îš|Êž|Æ™|Ä¸",
    "Ä·|Ä¶|k|K|:regional_indicator_k:",
  ].join("|"),
  l: [
    "ï¾š|ï½Œ|ï¼¬|ïºŽ|ïº‚|ðŸ‡±|ðŸ…»|ðŸ…›|ðŸ„»|ðš•|ð™»|ð™¡|ð™‡|ð˜­|ð˜“|ð—¹|ð—Ÿ|ð—…|ð–«|ð–‘|ð•·|ð•|ð•ƒ|ð”©|ð”|ð“µ|ð“›|ð“|ð’|ð‘³|ð‘™|ð¿|ð¥|ð‹|ð‘ƒ|ð›|ê®®|êˆ|ê“¡|ã„¥|ã—|â³‘|â³|â± |â“›|â“|â’§",
    "â…¬|â…ƒ|â…‚|â„“|â„’|â‚—|á¸½|á¸¼|á¸»|á¸º|á¸¹|á¸¸|á¸·|á¸¶|á´¸|á’º|á’ª|áž|á|áŽ±|á„‚|Ó€|Ë¡|ÊŸ|Ê†|Ê…|É­|É«|Æª|Æ–|Å‚|Å|Å€|Ä¿|Ä¾|Ä½|Ä¼|Ä»|Äº|Ä¹|l|L|:regional_indicator_l:",
  ].join("|"),
  m: [
    "ï¾¶|ï½|ï¼­|ðŸ‡²|ðŸ…¼|ðŸ…œ|ðŸ„¼|ðž›|ð¡|ðœ§|ð›­|ðš³|ðš–|ð™¼|ð™¢|ð™ˆ|ð˜®|ð˜”|ð—º|ð— |ð—†|ð–¬|ð–’|ð•¸|ð•ž|ð•„|ð”ª|ð”|ð“¶|ð“œ|ð“‚|ð’Ž|ð‘´|ð‘š|ð‘€|ð¦|ðŒ|ðŒ‘",
    "ðŠ°|ê®‡|ê“Ÿ|çˆª|â²˜|â“œ|â“‚|â’¨|â…¯|â„³|â‚¥|â‚˜|á¹ƒ|á¹‚|á¹|á¹€|á¸¿|á¸¾|áµ|á´¹|á´|áŸ£|á›–|á˜»|á—°|áŽ·|à¹“|Ó|Ð¼|Ðœ|Ï»|Ïº|Îœ|Ê|É±|É¯|m|M|:regional_indicator_m:",
  ].join("|"),
  n: [
    "ï½Ž|ï¼®|ðŸ‡³|ðŸ…½|ðŸ…|ðŸ„½|ðžœ|ð¢|ðœ¨|ð›®|ðš´|ðš—|ð™½|ð™£|ð™‰|ð˜¯|ð˜•|ð—»|ð—¡|ð—‡|ð–­|ð–“|ð•¹|ð•Ÿ|ð”«|ð”‘|ð“·|ð“|ð“ƒ|ð’©|ð’|ð‘µ|ð‘›|ð‘|ð§|ð|ð‘|ð¥|ê“µ|ê“ |åˆ€|å‡ ",
    "â² |â²š|â“|â“ƒ|â’©|â‹‚|âˆ|â„¿|â„•|â‚¦|â‚™|â¿|á¿‡|á¿†|á¿„|á¿ƒ|á¿‚|á¾—|á¾–|á¾•|á¾”|á¾“|á¾’|á¾‘|á¾|á½´|á¼§|á¼¦|á¼¥|á¼¤|á¼£|á¼¢|á¼¡|á¼ |á¹‹|á¹Š|á¹‰|á¹ˆ|á¹‡|á¹†|á¹…|á¹„|á¶°|á´º|á´Ž|áž ",
    "á˜‰|á‘Ž|á|á‰¡|á‰ |àº–|à¸ |à¸|×ž|Õ¼|Õ¸|Õ²|ÕŒ|Õˆ|Ó£|Ñ|Ð¹|Ð¸|ÐŸ|Ð™|Ð˜|Ð|Ïž|Î·|Î®|Î |Î|Í·|Í¶|É´|É³|É²|Ç¸|Æž|Æ|Å‹|Å‰|Åˆ|Å‡|Å†|Å…|Å„|Åƒ|Ã±|Ã‘|n|N|:regional_indicator_n:",
  ].join("|"),
  o: [
    "ï½|ï¼¯|ï»¬|ï»«|ï»ª|ï»©|ï®­|ï®¬|ï®«|ï®ª|ï®©|ï®¨|ï®§|ï®¦|ðŸ‡´|ðŸ…¾|ðŸ…ž|ðŸ„¾|ðž¼|ðž¸|ðžž|ðž‚|ð¾|ð¤|ðˆ|ð„|ðœª|ðœŽ|ðœŠ|ð›°|ð›”|ð›|ðš¶|ðš˜|ð™¾|ð™¤|ð™Š|ð˜°|ð˜–|ð—¼|ð—¢|ð—ˆ|ð–®|ð–”|ð•º",
    "ð• |ð•†|ð”¬|ð”’|ð“¸|ð“ž|ð’ª|ð’|ð‘¶|ð‘œ|ð‘‚|ð¨|ðŽ|ð“ª|ð“ƒ|ð“‚|ð¬|ð„|ðŠ«|ðŠ’|ê¬½|ê™¨|ê“³|ãŠ‰|ã„–|ã®|ã€‡|âµ™|âµ”|â²Ÿ|â²ž|â¨€|âœ¿|â˜‰|â“ž|â“„|â’ª|â¥|âŠ™|âˆ…|â„´|â‚’",
    "á¿º|á¿¸|á¾¯|á¾®|á¾­|á¾¬|á¾«|á¾ª|á¾©|á¾¨|á½¸|á½¯|á½®|á½­|á½¬|á½«|á½ª|á½©|á½¨|á½|á½Œ|á½‹|á½Š|á½‰|á½ˆ|á½…|á½„|á½ƒ|á½‚|á½|á½€|á»¡|á» |á»Ÿ|á»ž|á»|á»œ|á»›|á»š|á»™|á»˜|á»–|á»•|á»”|á»“|á»’|á»‘|á»|á»|á»Ž",
    "á»|á»Œ|á¹“|á¹’|á¹‘|á¹|á¹|á¹Ž|á¹|á¹Œ|Ã°|áµ’|á´¼|á´‘|á´|á—|á“|áŽ¾|áŽ§|á‹|áƒ¿|á€|á€|à»|à¹|à¹|à¶§|àµ¦|à´ |à³¦|à±¦|à¯¦|à­¦|à¬ |à«¦|à©¦|à§¦|à¥¦|ß€|Ûµ|Û|Û•|Û|Ú¾|Ù¥|Ù‡|×¡|Ö…",
    "Õ•|Ó¨|Ó§|Ó¦|Ñ»|Ð¾|Ð¤|Ðž|ÏŒ|Ï†|Ïƒ|Î¿|Î¸|ÎŸ|Î˜|Ëš|Ê˜|Ç¿|Ç¾|Ç’|Ç‘|Æ±|Æ¡|Æ |Å‘|Å|Å|ÅŽ|Å|ÅŒ|Ã¸|Ã¶|Ãµ|Ã´|Ã³|Ã²|Ã°|Ã˜|Ã–|Ã•|Ã”|Ã“|Ã’|Âº|Â°|o|O|â™¡|:regional_indicator_o:|0",
  ].join("|"),
  p: [
    "ï½±|ï½|ï¼°|ðŸ‡µ|ðŸ…¿|ðŸ…Ÿ|ðŸ„¿|ðŸˆ|ðžº|ðž Ï±|ðž |ðžŽ|ðž€|ð¦|ð”|ð†|ðœ¬|ðœš|ðœŒ|ð›²|ð› |ð›’|ðš¸|ðš™|ð™¿|ð™¥|ð™‹|ð˜±|ð˜—|ð—½|ð—£|ð—‰|ð–¯|ð–•|ð•¡|ð”­|ð“¹|ð“Ÿ|ð“…|ð’«|ð’‘|ð‘·|ð‘|ð‘ƒ|ð©|ð",
    "ð“„|ðŠ•|ê®²|ê“‘|å©|â²£|â²¢|â±£|â“Ÿ|â“…|â’«|â´|â„™|â„˜|â‚±|â‚š|â€½|á¿¬|á¿¥|á¿¤|á¹—|á¹–|á¹•|á¹”|áµ–|á´¾|á´©|á´˜|á•µ|á‘­|á¢|áŽ®|×§|Ö„|Õ¢|Ô€|ÒŽ|Ñ€|Ð |Ï¸|Ï·|Ï±|Ï|Î¡|Æ¿|Æ¤|Ã¾|Ãž|Â¶",
    "p|P|:regional_indicator_p:",
  ].join("|"),
  q: [
    "ï½‘|ï¼±|ðŸ‡¶|ðŸ†€|ðŸ… |ðŸ…€|ðšš|ðš€|ð™¦|ð™Œ|ð˜²|ð˜˜|ð—¾|ð—¤|ð—Š|ð–°|ð––|ð•¼|ð•¢|ð”®|ð””|ð“º|ð“ |ð“†|ð’¬|ð’’|ð‘¸|ð‘ž|ð‘„|ðª|ð|ðŒ’|ðŠ­|êŸ¼|ê–|ã‚|âµ•|â“ |â“†|â’¬|â„š|á»£|á¶|á•´",
    "á‘«|áŽ¤|à¹‘|Û¹|×£|Õ¦|Õ£|Ô›|Ò¨|Ï¥|Ï™|Ï˜|Î©|Ê |É‹|ÉŠ|Ç­|Ç¬|Çª|Æ|q|Q|:regional_indicator_q:",
  ].join("|"),
  r: [
    "ï½’|ï¼²|ðŸ‡·|ðŸ†|ðŸ…¡|ðŸ…|ðž’|ð˜|ðœž|ð›¤|ðšª|ðš›|ðš|ð™§|ð™|ð˜³|ð˜™|ð—¿|ð—¥|ð—‹|ð–±|ð–—|ð•½|ð•£|ð”¯|ð“»|ð“¡|ð“‡|ð’“|ð‘¹|ð‘Ÿ|ð‘…|ð«|ð‘|ð’´|ê®¢|ê®|ê­±|ê­ˆ|ê­‡|ê“£|å°º|â²…|â±¤|â“¡|â“‡|â’­|â„ž",
    "â„|â„œ|â„›|á¹Ÿ|á¹ž|á¹|á¹œ|á¹›|á¹š|á¹™|á¹˜|áµ£|á´¿|á´¦|á´š|á´™|áš±|á–‡|á’|áŽ¡|à½ |à½ž|àª°|Ö€|Ô»|Ñ|Ð³|Ð¯|Ê³|Ê|Ê€|É¿|É¾|É¼|É¹|ÉŒ|Æ¦|Å™|Å˜|Å—|Å–|Å•|Å”|Â®|r|R|:regional_indicator_r:",
  ].join("|"),
  s: [
    "ï½“|ï¼³|ï¼„|ï®Ž|ðŸ‡¸|ðŸ†‚|ðŸ…¢|ðŸ…‚|ðšœ|ðš‚|ð™¨|ð™Ž|ð˜´|ð˜š|ð˜€|ð—¦|ð—Œ|ð–²|ð–˜|ð•¾|ð•¤|ð•Š|ð”°|ð”–|ð“¼|ð“¢|ð“ˆ|ð’®|ð’”|ð‘º|ð‘ |ð‘†|ð¬|ð’|ð‘ˆ|ð |ðŠ–|ê®ª|êœ±|ê™…|ê™„|ê“¢|ê’š|ä¸‚|â“¢|â“ˆ|â’®|âˆ«|â‚´",
    "â‚›|á¹©|á¹¨|á¹§|á¹¦|á¹¥|á¹¤|á¹£|á¹¢|á¹¡|á¹ |á´¤|á”•|áš|á•|áŽ¦|à¸£|Ù‰|Ö†|Õ|Ñ•|Ð…|Ï©|Ë¢|Êƒ|Ê‚|È˜|Æ½|Æ¨|Æ§|Å¡|Å |ÅŸ|Åž|Å|Åœ|Å›|Åš|Â§|s|\\$|S|:regional_indicator_s:|5",
  ].join("|"),
  t: [
    "ï½²|ï½¨|ï½”|ï¼´|ðŸ‡¹|ðŸ†ƒ|ðŸ…£|ðŸ…ƒ|ðž½|ðš|ðšƒ|ð™©|ð™|ð˜µ|ð˜›|ð˜|ð—§|ð—|ð–³|ð–™|ð•¿|ð•¥|ð•‹|ð”±|ð”—|ð“½|ð“£|ð“‰|ð’¯|ð’•|ð‘»|ð‘¡|ð‘‡|ð­|ð“|ðŒ•|ðŠ±|ðŠ—|ê­²|ê“”|ê“„|ä¸…|ã„’|â²¦|â²„|âŸ™|â“£|â“‰|â’¯",
    "âŠ¥|âŠ¤|â„¾|â‚®|â‚œ|â€ |áº—|á¹±|á¹°|á¹¯|á¹®|á¹­|á¹¬|á¹«|á¹ª|áµ—|áµ€|á´›|á–¶|á’¥|á–|áŽ¿|áŽ±|áŽ¢|áŠ®|Ø­|Õ§|Õ‡|Ô»|Ôµ|Ò­|Ñ‚|Ð¢|Ð“|Ï¯|Ï®|Ï„|Ï€|Î¤|Î“|Í²|Êˆ|Ê‡|É¬|È¶|È›|Èš|Ç‚|Æ®|Æ¬|Æ«|Æš",
    "Å§|Å¥|Å¤|Å£|Å¢|t|T|:regional_indicator_t:|7",
  ].join("|"), // conflicts with F: Å¦
  u: [
    "ï½•|ï¼µ|ðŸ‡º|ðŸ†„|ðŸ…¤|ðŸ…„|ðžµ|ð»|ð|ðœ‡|ð›|ðšž|ðš„|ð™ª|ð™|ð˜¶|ð˜œ|ð˜‚|ð—¨|ð—Ž|ð–´|ð–š|ð–€|ð•¦|ð•Œ|ð”²|ð”˜|ð“¾|ð“¤|ð“Š|ð’°|ð’–|ð‘¼|ð‘¢|ð‘ˆ|ð®|ð”|ð“¶|ð“Ž|ê­’|ê­Ž|êžŸ|ê“´|ã„©|ã²|â“¤",
    "â“Š|â’°|â‹ƒ|âˆª|âˆ©|â„§|á¿§|á¿¦|á¿¢|á¿¡|á¿ |á½º|á½—|á½–|á½•|á½”|á½“|á½’|á½‘|á½|á»±|á»°|á»®|á»­|á»¬|á»«|á»ª|á»©|á»¨|á»§|á»¦|á»¥|á»¤|á¹»|á¹º|á¹¹|á¹¸|á¹·|á¹¶|á¹µ|á¹´|á¹³|á¹²|áµ¾|áµ¤|áµ˜|áµ|á´œ|á˜´|á˜®",
    "á“‘|á‘˜|á‘Œ|á¡|á¬|áˆ†|áˆ€|à¸¢|à¸™|àªª|Ö‡|Õ½|Õ´|Õ|Õ„|Ð¦|Ï|Ï‹|Ï…|Î¼|Î°|Ê‹|ÊŠ|É„|È”|Çœ|Ç›|Çš|Ç™|Ç˜|Ç—|Ç–|Ç•|Ç”|Ç“|Æ±|Æ°|Æ¯|Å³|Å²|Å±|Å°|Å¯|Å®|Å­|Å¬|Å«|Åª|Å©|Å¨|Ã»",
    "Ãº|Ã¹|Ãœ|Ã›|Ãš|Ã™|Âµ|u|U|:regional_indicator_u:",
  ].join("|"),
  v: [
    "ï½–|ï¼¶|ðŸ‡»|ðŸ†…|ðŸ…¥|ðŸ……|ð¼|ð‚|ðœˆ|ð›Ž|ðšŸ|ðš…|ð™«|ð™‘|ð˜·|ð˜|ð˜ƒ|ð—©|ð—|ð–µ|ð–›|ð–|ð•§|ð•|ð”³|ð”™|ð“¿|ð“¥|ð“‹|ð’±|ð’—|ð‘½|ð‘£|ð‘‰|ð¯|ð•|ð“˜|ð’°|ðŒ¡|ðŠ|ê®©|ê“¦|ê“¥|â´¸|â´·|â±½|â“¥|â“‹",
    "â’±|â‹|âˆ¨|âˆš|â…´|â…¤|â„£|á¹¿|á¹¾|á¹½|á¹¼|áµ¥|áµ›|á´§|á´ |áº|á±|á¯|á™|á‰|à¸‡|Û¸|Û·|Ù¨|Ù§|×©|×¢|×˜|Ñ¶|Ñµ|Ñ´|Ð›|Î½|Î›|ÊŒ|Ê‹|É…|Æ”|v|V|:regional_indicator_v:",
  ].join("|"),
  w: [
    "ï½—|ï¼·|ðŸ‡¼|ðŸ††|ðŸ…¦|ðŸ…†|ðŸ‰|ðŸ‚|ðž|ðžˆ|ð•|ðŽ|ðœ›|ðœ”|ðœ‹|ð›¡|ð›š|ð›‘|ðš |ðš†|ð™¬|ð™’|ð˜¸|ð˜ž|ð˜„|ð—ª|ð—|ð–¶|ð–œ|ð–‚|ð•¨|ð•Ž|ð”´|ð”š|ð”€|ð“¦|ð“Œ|ð’²|ð’˜|ð‘¾|ð‘¤",
    "ð‘Š|ð°|ð–|ð“‘|ê®ƒ|êž·|ê™|ê“ª|å±±|â²±|â“¦|â“Œ|â’²|âµ|â„¼|â‚©|á¿·|á¿¶|á¿´|á¿³|á¿²|áº˜|áº‰|áºˆ|áº‡|áº†|áº…|áº„|áºƒ|áº‚|áº|áº€|áµ‚|á´¡|á˜º|á—¯|á¯|á”|áŠ|á‡|áŽ³|áˆ |à½¡|àºŸ|à¸¬",
    "à¸|à°š|Õ¡|Ô|Ôœ|Ñ¡|Ñ |Ñˆ|Ð©|Ï–|ÏŽ|Ï‰|Ïˆ|Ê·|Ê|É¯|Åµ|Å´|w|W|:regional_indicator_w:",
  ].join("|"),
  x: [
    "ï¾’|ï½˜|ï¼¸|ï¬¯|ï¬®|ðŸ‡½|ðŸ†‡|ðŸ…§|ðŸ…‡|ðŸ€|ðž†|ðŒ|ðœ’|ð›˜|ðš¡|ðš‡|ð™­|ð™“|ð˜¹|ð˜Ÿ|ð˜…|ð—«|ð—‘|ð–·|ð–|ð–ƒ|ð•©|ð•|ð”µ|ð”›|ð”|ð“§|ð“|ð’³|ð’™|ð‘¿|ð‘¥|ð‘‹|ð±|ð—|ðŒ¢|ðŒ—|ðŠ´|ðŠ|ê­•|ê­“|êž³|ê“«|ê’¼",
    "ä¹‚|ã€¤|âµ|â²­|â²¬|â¨¯|â¤¬|â¤«|â•³|â“§|â“|â’³|âŒ§|â…¹|â…©|â„µ|â‚“|áº|áºŒ|áº‹|áºŠ|áš·|á™®|á™­|á•½|á•|áŒ€|áƒ¯|×|Ó¾|Ó¼|Ò³|Ñ…|Ð¥|Ð–|Ï‡|Î§|Ë£|É¤|Ã—|x|X|:regional_indicator_x:",
  ].join("|"),
  y: [
    "ï¾˜|ï½™|ï¼¹|ðŸ‡¾|ðŸ†ˆ|ðŸ…¨|ðŸ…ˆ|ðž¬|ð²|ðœ¸|ð›¾|ð›„|ðš¢|ðšˆ|ð™®|ð™”|ð˜º|ð˜ |ð˜†|ð—¬|ð—’|ð–¸|ð–ž|ð–„|ð•ª|ð•|ð”¶|ð”œ|ð”‚|ð“¨|ð“Ž|ð’´|ð’š|ð’€|ð‘¦|ð‘Œ|ð²|ð˜|ðŠ²|ê­š|ê“¬|ê¯|êŒ¦|ã„š|â²¨|â“¨|â“Ž|â’´",
    "â…„|â„½|á¿ª|á¿©|á¿¨|á½Ÿ|á½|á½›|á½™|á»¿|á»¹|á»¸|á»·|á»¶|á»µ|á»´|á»³|á»²|áº™|áº|áºŽ|á¶Œ|á–»|áŽ½|áŽ©|áƒ§|à¸¯|×¥|Õ¾|Õ¯|Ó²|Ó‹|Ò±|Ò¯|Ò®|Ñ‡|Ñƒ|Ð£|ÐŽ|Ï”|Ï“|Ï’|Î³|Î¥|ÎŽ|Ë |Ê¸|Ê|ÊŽ|É£|ÉŽ|Æ³",
    "Å¸|Å·|Å¶|Ã¿|Ã½|Ã|Â¥|y|Y|:regional_indicator_y:",
  ].join("|"),
  z: [
    "ï½š|ï¼º|ðŸ‡¿|ðŸ†‰|ðŸ…©|ðŸ…‰|ðš£|ðš‰|ð™¯|ð™•|ð˜»|ð˜¡|ð˜‡|ð—­|ð—“|ð–¹|ð–Ÿ|ð–…|ð•«|ð”·|ð”ƒ|ð“©|ð“|ð’µ|ð’›|ð’|ð‘§|ð‘|ð³|ð™|ê®“|ê“œ|ä¹™|â±«|â˜¡|â“©|â“|â’µ|â„¨|â„¤|áº•|áº”|áº“|áº’|áº‘|áº|á¶»|á´¢|á™†",
    "á˜”|áƒ|áš|àºŠ|Õ¹|Î¶|Î–|Ê‘|Ê|É€|È¥|Æ¹|Æ¶|Æµ|Å¾|Å½|Å¼|Å»|Åº|Å¹|z|Z|:regional_indicator_z:",
  ].join("|"),
  " ": "\\s+", // multiple whitespace -> space
  ".": "ï¼Ž",
  ",": "ï¼Œ|â€˜",
  "?": "ï¼Ÿ",
};

const REPLACED_CHARS: Record<string, RegExp> = Array.from(Object.entries(REPLACED_CHARS_PATTERNS)).reduce(
  (obj, [to, from]) => {
    obj[to] = new RegExp(from, "gm");
    return obj;
  },
  {},
);

const NORMAL_CHARS_REGEX = /^[a-z2689:.\-_+()*&^%><;"'}{~,]+$/i;

function containsOnlyNormalChars(text: string) {
  return NORMAL_CHARS_REGEX.test(text);
}

/**
 * Normalizes the input text to only lowercase ASCII letters and special characters
 */
export function normalizeText(text: string) {
  if (!containsOnlyNormalChars(text)) {
    for (const to in REPLACED_CHARS) {
      text = text.replace(REPLACED_CHARS[to], to);
    }
  }

  return stripMarks(text.toLowerCase());
}
